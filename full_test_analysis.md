# 도메인 분류기 최적화 실험 최종 보고서

**날짜**: 2025-12-21
**작성자**: AI Assistant

---

## 1. 개요
본 프로젝트는 사용자의 보험 관련 질문을 적절한 업무 카테고리(도메인)로 분류하여 RAG(검색 증강 생성) 시스템의 정확도를 높이는 것을 목표로 했습니다. 초기 21개 도메인 체계의 모호함을 해결하기 위해 다양한 실험을 수행했습니다.

## 2. 실험 진행 요약

### 실험 13: 13개 상위 도메인 통합
- **접근**: 21개 도메인을 13개 유사 그룹으로 통합하여 분류.
- **결과**: 정확도 32.67%.
- **분석**: "보험금 보장" 도메인으로의 쏠림 현상이 심각. LLM은 모든 보험 질문을 '보장'으로 해석하려는 경향을 보임.

### 실험 14: 15개 의도(Intent) 기반 도메인
- **접근**: 사용자의 행동 의도(변경, 납부, 청구 등)를 중심으로 15개 도메인 재설계.
- **결과**: 정확도 26.00%.
- **분석**: 의도는 명확해졌으나, Ground Truth(GT)와의 매핑 불일치가 여전히 큼. 예를 들어 "주소 변경"을 LLM은 `정보 변경`으로 잘 분류했으나, GT는 `계약정보`(때로는 `고객정보`)로 혼재되어 있어 오답 처리됨.

### 실험 16: Micro-Intent (초세분화 의도) 분류 (★ 성공)
- **접근**: 21개 도메인 대신, 데이터에서 도출한 **42개 구체적 행동(Micro-Intent)**을 선택지로 제공. 이후 코드로 GT에 매핑.
- **결과**: 정확도 **46.00%** (기존 대비 약 18%p 상승).
- **성과**:
  - LLM이 모호한 상위 개념보다 "주소 변경", "납입 계좌 변경" 같은 구체적 행동을 훨씬 잘 이해함.
  - 매핑 로직을 통해 GT와의 괴리를 줄일 수 있었음.

### 실험 17: Fuzzy Matching 및 조건부 매핑
- **접근**: LLM의 응답이 정확히 일치하지 않아도 유사도로 판단(Fuzzy Match)하고, 질문 내 키워드로 분류를 보정(Conditional Mapping).
- **결과**: 정확도 35.00% (20개 샘플, 변동성 있음).
- **분석**: Fuzzy Matching은 '기타' 분류를 줄이는 데 기여했으나, 조건부 매핑 규칙이 일부 GT와 충돌함.

## 3. 최종 산출물: 새로운 Ground Truth 데이터셋
기존 21개 GT의 모호함을 해결하기 위해, 695개 전체 질문을 42개 Micro-Intent 기준으로 재분류하여 `input/input_new_gt.xlsx`를 생성했습니다.

- **방법**: LLM을 이용해 전수 분류 수행.
- **처리 결과**:
  - 명확히 분류된 건은 해당 Micro-Intent로 태깅.
  - 확신도가 낮은 건은 `미분류-{예측값}`으로 태깅하여 사람의 검토가 용이하도록 함.

## 4. 제언 및 향후 계획

1.  **Micro-Intent 체계 도입**: RAG 시스템의 메타데이터 필터를 기존 21개에서 42개 Micro-Intent로 변경할 것을 강력히 권장합니다. 이는 문서 매핑의 정확도를 높이고 검색 범위를 좁히는 데 탁월합니다.
2.  **데이터 정제**: `input/input_new_gt.xlsx`의 '미분류' 항목을 수동으로 검토하여 학습 데이터로 활용하면 분류기의 성능을 90% 이상으로 끌어올릴 수 있습니다.
3.  **하이브리드 접근**: 1차로 Rule-based(키워드) 분류를 적용하고, 2차로 LLM이 Micro-Intent를 분류하는 파이프라인을 구축하면 비용 효율성과 정확도를 동시에 잡을 수 있습니다.